{% extends "cfp_review/base.html" %}
{% block body %}
<h2>{{proposal.title}} <small>by {{proposal.user.name}}</small></h2>

<form method="post" action="{{ url_for('.update_proposal', proposal_id=proposal.id) }}" class="shrink">
{{ form.hidden_tag() }}
    <dl class="dl-horizontal">
        <dt>Date</dt>
        <dd>{{proposal.created.strftime("%Y-%m-%d")}}</dd>
        <dt>State</dt>
        <dd>{{proposal.state}}</dd>
        <dt>Type</dt>
        <dd>{{proposal.type}}</dd>
        <dt>Submitter</dt>
        <dd>{{proposal.user.name}}</dd>
        <dt>Title</dt>
        <dd>{{proposal.title}}</dd>
        <dt>Description</dt>
        <dd>{{proposal.description}}</dd>
        <dt>Requirements</dt>
        <dd>{% if proposal.requirements %}{{ proposal.requirements }}{% else %}None{% endif %}</dd>
        <dt>Length</dt>
        <dd>{{proposal.length}}</dd>
        <dt>Notice Required</dt>
        <dd>{{proposal.notice_required}}</dd>
        <dt>Needs Help</dt>
        <dd>{% if proposal.needs_help -%} Yes {%- else -%} No {%- endif %}</dd>
        <dt>Needs Money</dt>
        <dd>{% if proposal.needs_money -%} Yes {%- else -%} No {%- endif %}</dd>
        <dt>One Day</dt>
        <dd>{% if proposal.one_day -%} Yes {%- else -%} No {%- endif %}</dd>
        {% if proposal.type == 'talk' %}
            <dt>
                <label for="category" class="control-label">{{ form.category.label.text }}</label>
            </dt>
            <dd {%- if form.category.errors %} class="has-error" {%- endif %}>
                {{ form.category(class_='form-control') | safe }}
                {% if form.category.errors %}
                    {% for error in form.category.errors %}
                        <p class="help-block" id="help-block-{{ loop.index }}">{{ error }}</p>
                    {% endfor %}
                {% endif %}
            </dd>
        {% elif proposal.type == 'workshop' %}
            <dt>Attendees</dt>
            <dd>{{proposal.attendees}}</dd>
            <dt>Cost</dt>
            <dd>&pound; {{proposal.cost}}</dd>
        {% elif proposal.type == 'installation' %}
            <dt>Size</dt>
            <dd>{{proposal.size}}</dd>
            <dt>Funds</dt>
            <dd>{{proposal.funds}}</dd>
        {% endif %}
    </dl>
    <p class="pull-right">
        {% if proposal.state == 'locked' %}
            {{ form.reject(class_="btn btn-danger") }}
            &nbsp;
            {{ form.checked(class_="btn btn-success") }}
        {% endif %}
    </p>
    <div class="clearfix"></div>
    <p class="pull-right">
        {% if next_proposal %}
            <a href="{{ url_for('.update_proposal', proposal_id=next_proposal.id) }}"
                class="btn btn-default">
                Review next locked proposal
            </a>
        {% else %}
            <a href="{{ url_for('.proposals', state='locked') }}"
                class="btn btn-default">
                See all remaining locked proposals
            </a>
        {% endif %}
    </p>
</form>

{% endblock %}
